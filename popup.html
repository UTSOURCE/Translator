<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>翻译器</title>
    <style>
      :root {
        --bg: #f6f8fb;
        --card-bg: #ffffff;
        --text: #222;
        --muted: #667085;
        --border: #e6e8ef;
        --primary: #4a90e2;
        --primary-600: #346fc7;
        --ring: #cfe2ff;
      }
      * { box-sizing: border-box; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 12px; background: radial-gradient(1200px 600px at 20% -10%, #eef4ff 0%, transparent 60%), var(--bg); color: var(--text); }
      .card { width: 480px; margin: 0 auto; background: var(--card-bg); border: 1px solid var(--border); border-radius: 12px; padding: 14px; box-shadow: 0 6px 20px rgba(16,24,40,0.06); }

      h1 { font-size: 16px; margin: 0 0 10px; letter-spacing: .3px; color: #0f172a; }
      label { font-size: 12px; color: var(--muted); }

      select, textarea, button, progress { width: 100%; }
      select, textarea { border: 1px solid var(--border); border-radius: 10px; background: #fff; padding: 10px 12px; font-size: 13px; color: var(--text); transition: border-color .15s ease, box-shadow .15s ease; }
      select:focus, textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px var(--ring); }
      textarea { min-height: 120px; margin: 8px 0 10px; line-height: 1.45; }

      .row { display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px; margin: 8px 0; }
      .swap-cell { display: flex; align-items: end; justify-content: center; }
      .swap-btn { width: 34px; height: 34px; border-radius: 50%; border: 1px solid var(--border); background: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center; color: var(--primary); transition: background .15s ease, border-color .15s ease, color .15s ease; }
      .swap-btn:hover { background: #f3f6ff; border-color: #c8dafc; color: var(--primary-600); }
      .swap-btn svg { width: 18px; height: 18px; }

      .btn { appearance: none; border: 1px solid transparent; border-radius: 10px; padding: 10px 14px; font-size: 13px; cursor: pointer; transition: transform .02s ease, box-shadow .15s ease, background .15s ease; }
      .btn.primary { background: linear-gradient(180deg, #6fb2ff, var(--primary)); color: #fff; box-shadow: 0 1px 1px rgba(16,24,40,0.06); }
      .btn.primary:hover { background: linear-gradient(180deg, #5aa6ff, var(--primary-600)); }
      .btn:active { transform: translateY(1px); }
      .btn:disabled { opacity: .6; cursor: not-allowed; }

      .hint { font-size: 11px; color: var(--muted); margin-top: 8px; }
      .out { min-height: 110px; white-space: pre-wrap; border: 1px solid var(--border); padding: 12px; border-radius: 10px; background: #fbfdff; }
      .small { font-size: 11px; }
      .ok { color: #10b981; }
      .warn { color: #f59e0b; }
      .err { color: #ef4444; }
      .hidden { display: none; }

      .prog { margin-top: 10px; border: 1px solid var(--border); border-radius: 10px; padding: 10px; background: linear-gradient(180deg, #fff, #f7f9fe); }
      progress { appearance: none; height: 10px; border-radius: 20px; overflow: hidden; background: #eef2f7; }
      progress::-webkit-progress-bar { background: #eef2f7; border-radius: 20px; }
      progress::-webkit-progress-value { background: linear-gradient(90deg, #7db3ff, #4a90e2); border-radius: 20px; }
      progress::-moz-progress-bar { background: linear-gradient(90deg, #7db3ff, #4a90e2); }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Translator快速翻译</h1>

      <div class="row">
        <div>
          <label for="sourceLang">来源语言</label>
          <select id="sourceLang"></select>
        </div>
        <div class="swap-cell">
          <button id="swapBtn" class="swap-btn" title="交换来源与目标语言" aria-label="交换来源与目标语言">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="16 3 21 8 16 13"></polyline>
              <line x1="21" y1="8" x2="3" y2="8"></line>
              <polyline points="8 21 3 16 8 11"></polyline>
              <line x1="3" y1="16" x2="21" y2="16"></line>
            </svg>
          </button>
        </div>
        <div>
          <label for="targetLang">目标语言</label>
          <select id="targetLang"></select>
        </div>
      </div>

      <div style="display:flex;align-items:center;justify-content:space-between;">
        <label for="inputText">文本</label>
        <span id="charCount" class="small" aria-live="polite">字数：0</span>
      </div>
      <textarea id="inputText" placeholder="输入需要翻译的文本..."></textarea>

      <button id="translateBtn" class="btn primary">开始翻译</button>

      <div class="hint small" id="status"></div>

      <div id="downloadSection" class="prog hidden">
        <label class="small">模型下载进度</label>
        <progress id="downloadProgress" value="0" max="100"></progress>
        <div class="small" id="downloadPct">0%</div>
      </div>

      <div class="small" style="display:flex;align-items:center;justify-content:space-between;margin-top:12px;margin-bottom:6px;">
        <h2 class="small" style="margin:0;">翻译结果</h2>
        <div style="display:flex;gap:8px;">
          <button id="speakBtn" class="btn" style="width:auto;padding:6px 10px;" title="朗读翻译结果" aria-label="朗读翻译结果">朗读</button>
          <button id="copyBtn" class="btn" style="width:auto;padding:6px 10px;" title="复制翻译结果" aria-label="复制翻译结果">复制</button>
        </div>
      </div>
      <div id="output" class="out"></div>

      <div class="small" style="text-align:center;color:#999;margin-top:10px;">Powered by：AnYi</div>

      <script src="popup.js" type="module"></script>
    </div>
  </body>
</html>

